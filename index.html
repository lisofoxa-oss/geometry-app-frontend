<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ì–µ–æ–º–µ—Ç—Ä–∏—è 7 –∫–ª–∞—Å—Å | –£—á–µ–±–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏</title>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Telegram Web App SDK -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Urbanist:wght@400;600;700;800&family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --primary: #3B82F6;
            --primary-light: #60A5FA;
            --primary-dark: #2563EB;
            --success: #10B981;
            --warning: #F59E0B;
            --danger: #EF4444;
            --bg: #F8FAFC;
            --surface: #FFFFFF;
            --text: #1E293B;
            --text-secondary: #64748B;
            --border: #E2E8F0;
            --shadow: rgba(0, 0, 0, 0.1);
        }
        
        body {
            font-family: 'Urbanist', -apple-system, sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
            overflow-x: hidden;
            min-height: 100vh;
            position: relative;
        }
        
        /* –ì–µ–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏–π —Ñ–æ–Ω */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                linear-gradient(135deg, transparent 0%, transparent 48%, var(--primary) 48%, var(--primary) 52%, transparent 52%),
                linear-gradient(45deg, transparent 0%, transparent 48%, rgba(59, 130, 246, 0.05) 48%, rgba(59, 130, 246, 0.05) 52%, transparent 52%);
            background-size: 80px 80px;
            opacity: 0.3;
            z-index: 0;
            pointer-events: none;
        }
        
        #root {
            position: relative;
            z-index: 1;
            max-width: 100%;
            margin: 0 auto;
            padding-bottom: 80px;
        }
        
        /* Header */
        .header {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            padding: 24px 20px;
            text-align: center;
            box-shadow: 0 4px 20px rgba(59, 130, 246, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -10%;
            width: 200px;
            height: 200px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            animation: float 6s ease-in-out infinite;
        }
        
        .header h1 {
            font-size: 28px;
            font-weight: 800;
            margin-bottom: 4px;
            position: relative;
        }
        
        .header p {
            font-size: 14px;
            opacity: 0.9;
            position: relative;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }
        
        /* Navigation Tabs */
        .tabs {
            display: flex;
            gap: 8px;
            padding: 16px 20px;
            background: var(--surface);
            border-bottom: 2px solid var(--border);
            overflow-x: auto;
            scrollbar-width: none;
        }
        
        .tabs::-webkit-scrollbar {
            display: none;
        }
        
        .tab {
            flex-shrink: 0;
            padding: 10px 20px;
            border: none;
            background: transparent;
            color: var(--text-secondary);
            font-size: 15px;
            font-weight: 600;
            font-family: 'Urbanist', sans-serif;
            cursor: pointer;
            border-radius: 12px;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .tab.active {
            background: var(--primary);
            color: white;
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
        }
        
        .tab:not(.active):hover {
            background: var(--border);
        }
        
        /* Stats Bar */
        .stats-bar {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            padding: 20px;
            background: var(--surface);
            border-bottom: 1px solid var(--border);
        }
        
        .stat-card {
            background: linear-gradient(135deg, var(--bg), white);
            padding: 16px;
            border-radius: 16px;
            text-align: center;
            border: 2px solid var(--border);
            transition: transform 0.2s ease;
        }
        
        .stat-card:active {
            transform: scale(0.95);
        }
        
        .stat-value {
            font-size: 24px;
            font-weight: 800;
            color: var(--primary);
            font-family: 'JetBrains Mono', monospace;
        }
        
        .stat-label {
            font-size: 12px;
            color: var(--text-secondary);
            margin-top: 4px;
            font-weight: 600;
        }
        
        /* Content Area */
        .content {
            padding: 20px;
        }
        
        /* Flashcard */
        .flashcard-container {
            perspective: 1000px;
            margin-bottom: 24px;
        }
        
        .flashcard {
            position: relative;
            width: 100%;
            min-height: 320px;
            transition: transform 0.6s;
            transform-style: preserve-3d;
            cursor: pointer;
        }
        
        .flashcard.flipped {
            transform: rotateY(180deg);
        }
        
        .card-face {
            position: absolute;
            width: 100%;
            min-height: 320px;
            backface-visibility: hidden;
            border-radius: 24px;
            padding: 32px 24px;
            box-shadow: 0 10px 40px var(--shadow);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .card-front {
            background: linear-gradient(135deg, white, #F1F5F9);
            border: 3px solid var(--primary);
        }
        
        .card-back {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            transform: rotateY(180deg);
        }
        
        .card-type-badge {
            position: absolute;
            top: 16px;
            right: 16px;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .badge-definition {
            background: rgba(16, 185, 129, 0.2);
            color: var(--success);
        }
        
        .badge-theorem {
            background: rgba(245, 158, 11, 0.2);
            color: var(--warning);
        }
        
        .card-question {
            font-size: 22px;
            font-weight: 700;
            margin: 20px 0;
            line-height: 1.4;
        }
        
        .card-hint {
            font-size: 14px;
            color: var(--text-secondary);
            margin-top: 16px;
            padding: 12px 20px;
            background: rgba(59, 130, 246, 0.1);
            border-radius: 12px;
            font-style: italic;
        }
        
        .card-answer {
            font-size: 18px;
            line-height: 1.6;
            margin: 16px 0;
        }
        
        .card-formula {
            font-family: 'JetBrains Mono', monospace;
            font-size: 20px;
            font-weight: 600;
            margin: 20px 0;
            padding: 16px 24px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 16px;
            border: 2px dashed rgba(255, 255, 255, 0.5);
        }
        
        .card-properties {
            margin-top: 20px;
            text-align: left;
            width: 100%;
        }
        
        .card-properties li {
            margin: 8px 0;
            font-size: 15px;
            list-style: none;
        }
        
        /* Action Buttons */
        .card-actions {
            display: flex;
            gap: 12px;
            margin-top: 20px;
        }
        
        .action-btn {
            flex: 1;
            padding: 14px 20px;
            border: none;
            border-radius: 16px;
            font-size: 16px;
            font-weight: 700;
            font-family: 'Urbanist', sans-serif;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 4px 12px var(--shadow);
        }
        
        .btn-know {
            background: linear-gradient(135deg, var(--success), #059669);
            color: white;
        }
        
        .btn-learning {
            background: linear-gradient(135deg, var(--warning), #D97706);
            color: white;
        }
        
        .btn-forgot {
            background: linear-gradient(135deg, var(--danger), #DC2626);
            color: white;
        }
        
        .action-btn:active {
            transform: scale(0.95);
        }
        
        /* Progress Bar */
        .progress-container {
            padding: 20px;
            background: var(--surface);
            border-radius: 16px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px var(--shadow);
        }
        
        .progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 14px;
            font-weight: 600;
            color: var(--text-secondary);
        }
        
        .progress-bar {
            height: 12px;
            background: var(--border);
            border-radius: 20px;
            overflow: hidden;
            position: relative;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--primary-light));
            border-radius: 20px;
            transition: width 0.5s ease;
            position: relative;
            overflow: hidden;
        }
        
        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: shimmer 2s infinite;
        }
        
        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        /* Mode Selection */
        .mode-selection {
            display: grid;
            gap: 16px;
            margin-bottom: 24px;
        }
        
        .mode-card {
            background: var(--surface);
            padding: 24px;
            border-radius: 20px;
            border: 3px solid var(--border);
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px var(--shadow);
        }
        
        .mode-card:hover {
            border-color: var(--primary);
            transform: translateY(-4px);
            box-shadow: 0 8px 24px rgba(59, 130, 246, 0.2);
        }
        
        .mode-icon {
            font-size: 48px;
            margin-bottom: 12px;
        }
        
        .mode-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 8px;
        }
        
        .mode-description {
            font-size: 14px;
            color: var(--text-secondary);
        }
        
        /* Completion Screen */
        .completion-screen {
            text-align: center;
            padding: 40px 20px;
        }
        
        .completion-icon {
            font-size: 80px;
            margin-bottom: 20px;
            animation: bounce 1s ease-in-out;
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }
        
        .completion-title {
            font-size: 28px;
            font-weight: 800;
            margin-bottom: 12px;
        }
        
        .completion-message {
            font-size: 16px;
            color: var(--text-secondary);
            margin-bottom: 32px;
        }
        
        .btn-restart {
            padding: 16px 32px;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            border: none;
            border-radius: 16px;
            font-size: 18px;
            font-weight: 700;
            font-family: 'Urbanist', sans-serif;
            cursor: pointer;
            box-shadow: 0 8px 24px rgba(59, 130, 246, 0.3);
        }
        
        /* Responsive */
        @media (max-width: 480px) {
            .header h1 {
                font-size: 24px;
            }
            
            .card-question {
                font-size: 18px;
            }
            
            .card-answer {
                font-size: 16px;
            }
        }
        
        /* Loading Animation */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 400px;
        }
        
        .spinner {
            width: 50px;
            height: 50px;
            border: 4px solid var(--border);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;
        
        // ========== DATA ==========
        const trianglesData = {
            id: 'triangles',
            title: 'üî∫ –¢—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∏',
            description: '–ü—Ä–∏–∑–Ω–∞–∫–∏ —Ä–∞–≤–µ–Ω—Å—Ç–≤–∞, –≤–∏–¥—ã —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–æ–≤, —Å–≤–æ–π—Å—Ç–≤–∞',
            icon: 'üî∫',
            color: '#3B82F6',
            cards: [
                {
                    id: 'tri-001',
                    type: 'definition',
                    difficulty: 1,
                    question: '–ß—Ç–æ —Ç–∞–∫–æ–µ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫?',
                    answer: '–¢—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫ ‚Äî —ç—Ç–æ –≥–µ–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∞—è —Ñ–∏–≥—É—Ä–∞, —Å–æ—Å—Ç–æ—è—â–∞—è –∏–∑ —Ç—Ä—ë—Ö —Ç–æ—á–µ–∫ (–≤–µ—Ä—à–∏–Ω), –Ω–µ –ª–µ–∂–∞—â–∏—Ö –Ω–∞ –æ–¥–Ω–æ–π –ø—Ä—è–º–æ–π, –∏ —Ç—Ä—ë—Ö –æ—Ç—Ä–µ–∑–∫–æ–≤ (—Å—Ç–æ—Ä–æ–Ω), –ø–æ–ø–∞—Ä–Ω–æ —Å–æ–µ–¥–∏–Ω—è—é—â–∏—Ö —ç—Ç–∏ —Ç–æ—á–∫–∏.',
                    hint: '–¢—Ä–∏ –≤–µ—Ä—à–∏–Ω—ã, —Ç—Ä–∏ —Å—Ç–æ—Ä–æ–Ω—ã'
                },
                {
                    id: 'tri-002',
                    type: 'theorem',
                    difficulty: 1,
                    question: '–ß–µ–º—É —Ä–∞–≤–Ω–∞ —Å—É–º–º–∞ —É–≥–ª–æ–≤ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞?',
                    answer: '–°—É–º–º–∞ —É–≥–ª–æ–≤ –ª—é–±–æ–≥–æ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞ —Ä–∞–≤–Ω–∞ 180¬∞',
                    hint: '–û–¥–Ω–æ –∏–∑ —Å–∞–º—ã—Ö –≤–∞–∂–Ω—ã—Ö —Å–≤–æ–π—Å—Ç–≤!',
                    formula: '‚à†A + ‚à†B + ‚à†C = 180¬∞'
                },
                {
                    id: 'tri-003',
                    type: 'definition',
                    difficulty: 1,
                    question: '–ö–∞–∫–æ–π —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –û–°–¢–†–û–£–ì–û–õ–¨–ù–´–ú?',
                    answer: '–û—Å—Ç—Ä–æ—É–≥–æ–ª—å–Ω—ã–π —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫ ‚Äî —ç—Ç–æ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫, —É –∫–æ—Ç–æ—Ä–æ–≥–æ –≤—Å–µ —Ç—Ä–∏ —É–≥–ª–∞ –æ—Å—Ç—Ä—ã–µ (–º–µ–Ω—å—à–µ 90¬∞).',
                    hint: '–í—Å–µ —É–≥–ª—ã –æ—Å—Ç—Ä—ã–µ',
                    example: '‚à†A = 60¬∞, ‚à†B = 70¬∞, ‚à†C = 50¬∞'
                },
                {
                    id: 'tri-004',
                    type: 'definition',
                    difficulty: 1,
                    question: '–ö–∞–∫–æ–π —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –ü–†–Ø–ú–û–£–ì–û–õ–¨–ù–´–ú?',
                    answer: '–ü—Ä—è–º–æ—É–≥–æ–ª—å–Ω—ã–π —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫ ‚Äî —ç—Ç–æ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫, —É –∫–æ—Ç–æ—Ä–æ–≥–æ –æ–¥–∏–Ω —É–≥–æ–ª —Ä–∞–≤–µ–Ω 90¬∞ (–ø—Ä—è–º–æ–π —É–≥–æ–ª).',
                    hint: '–û–¥–∏–Ω —É–≥–æ–ª 90¬∞',
                    example: '–°—Ç–æ—Ä–æ–Ω—ã, –æ–±—Ä–∞–∑—É—é—â–∏–µ –ø—Ä—è–º–æ–π —É–≥–æ–ª, –Ω–∞–∑—ã–≤–∞—é—Ç—Å—è –∫–∞—Ç–µ—Ç–∞–º–∏, –∞ —Ç—Ä–µ—Ç—å—è —Å—Ç–æ—Ä–æ–Ω–∞ ‚Äî –≥–∏–ø–æ—Ç–µ–Ω—É–∑–æ–π'
                },
                {
                    id: 'tri-005',
                    type: 'definition',
                    difficulty: 1,
                    question: '–ö–∞–∫–æ–π —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –¢–£–ü–û–£–ì–û–õ–¨–ù–´–ú?',
                    answer: '–¢—É–ø–æ—É–≥–æ–ª—å–Ω—ã–π —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫ ‚Äî —ç—Ç–æ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫, —É –∫–æ—Ç–æ—Ä–æ–≥–æ –æ–¥–∏–Ω —É–≥–æ–ª –±–æ–ª—å—à–µ 90¬∞ (—Ç—É–ø–æ–π —É–≥–æ–ª).',
                    hint: '–û–¥–∏–Ω —É–≥–æ–ª –±–æ–ª—å—à–µ 90¬∞',
                    example: '‚à†A = 110¬∞, ‚à†B = 40¬∞, ‚à†C = 30¬∞'
                },
                {
                    id: 'tri-006',
                    type: 'definition',
                    difficulty: 1,
                    question: '–ö–∞–∫–æ–π —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –†–ê–ó–ù–û–°–¢–û–†–û–ù–ù–ò–ú?',
                    answer: '–†–∞–∑–Ω–æ—Å—Ç–æ—Ä–æ–Ω–Ω–∏–π —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫ ‚Äî —ç—Ç–æ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫, —É –∫–æ—Ç–æ—Ä–æ–≥–æ –≤—Å–µ —Ç—Ä–∏ —Å—Ç–æ—Ä–æ–Ω—ã –∏–º–µ—é—Ç —Ä–∞–∑–Ω—É—é –¥–ª–∏–Ω—É.',
                    hint: '–í—Å–µ —Å—Ç–æ—Ä–æ–Ω—ã —Ä–∞–∑–Ω—ã–µ',
                    example: 'AB ‚â† BC ‚â† AC'
                },
                {
                    id: 'tri-007',
                    type: 'definition',
                    difficulty: 2,
                    question: '–ö–∞–∫–æ–π —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –†–ê–í–ù–û–ë–ï–î–†–ï–ù–ù–´–ú?',
                    answer: '–†–∞–≤–Ω–æ–±–µ–¥—Ä–µ–Ω–Ω—ã–π —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫ ‚Äî —ç—Ç–æ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫, —É –∫–æ—Ç–æ—Ä–æ–≥–æ –¥–≤–µ —Å—Ç–æ—Ä–æ–Ω—ã —Ä–∞–≤–Ω—ã. –†–∞–≤–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã –Ω–∞–∑—ã–≤–∞—é—Ç—Å—è –±–æ–∫–æ–≤—ã–º–∏, —Ç—Ä–µ—Ç—å—è —Å—Ç–æ—Ä–æ–Ω–∞ ‚Äî –æ—Å–Ω–æ–≤–∞–Ω–∏–µ–º.',
                    hint: '–î–≤–µ —Å—Ç–æ—Ä–æ–Ω—ã —Ä–∞–≤–Ω—ã',
                    properties: [
                        '‚úì –£–≥–ª—ã –ø—Ä–∏ –æ—Å–Ω–æ–≤–∞–Ω–∏–∏ —Ä–∞–≤–Ω—ã',
                        '‚úì –í—ã—Å–æ—Ç–∞, –º–µ–¥–∏–∞–Ω–∞ –∏ –±–∏—Å—Å–µ–∫—Ç—Ä–∏—Å–∞ –∫ –æ—Å–Ω–æ–≤–∞–Ω–∏—é —Å–æ–≤–ø–∞–¥–∞—é—Ç'
                    ]
                },
                {
                    id: 'tri-008',
                    type: 'theorem',
                    difficulty: 2,
                    question: '–°–≤–æ–π—Å—Ç–≤–æ —É–≥–ª–æ–≤ —Ä–∞–≤–Ω–æ–±–µ–¥—Ä–µ–Ω–Ω–æ–≥–æ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞',
                    answer: '–í —Ä–∞–≤–Ω–æ–±–µ–¥—Ä–µ–Ω–Ω–æ–º —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–µ —É–≥–ª—ã –ø—Ä–∏ –æ—Å–Ω–æ–≤–∞–Ω–∏–∏ —Ä–∞–≤–Ω—ã.',
                    hint: '–ï—Å–ª–∏ AB = BC, —Ç–æ...',
                    formula: '–ï—Å–ª–∏ AB = BC, —Ç–æ ‚à†A = ‚à†C'
                },
                {
                    id: 'tri-009',
                    type: 'definition',
                    difficulty: 1,
                    question: '–ö–∞–∫–æ–π —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –†–ê–í–ù–û–°–¢–û–†–û–ù–ù–ò–ú?',
                    answer: '–†–∞–≤–Ω–æ—Å—Ç–æ—Ä–æ–Ω–Ω–∏–π —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫ ‚Äî —ç—Ç–æ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫, —É –∫–æ—Ç–æ—Ä–æ–≥–æ –≤—Å–µ —Ç—Ä–∏ —Å—Ç–æ—Ä–æ–Ω—ã —Ä–∞–≤–Ω—ã.',
                    hint: '–í—Å–µ —Å—Ç–æ—Ä–æ–Ω—ã –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ',
                    properties: [
                        '‚úì –í—Å–µ —É–≥–ª—ã —Ä–∞–≤–Ω—ã 60¬∞',
                        '‚úì –≠—Ç–æ —á–∞—Å—Ç–Ω—ã–π —Å–ª—É—á–∞–π —Ä–∞–≤–Ω–æ–±–µ–¥—Ä–µ–Ω–Ω–æ–≥–æ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞'
                    ]
                },
                {
                    id: 'tri-010',
                    type: 'theorem',
                    difficulty: 3,
                    question: '–ü–µ—Ä–≤—ã–π –ø—Ä–∏–∑–Ω–∞–∫ —Ä–∞–≤–µ–Ω—Å—Ç–≤–∞ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–æ–≤',
                    answer: '–ï—Å–ª–∏ –¥–≤–µ —Å—Ç–æ—Ä–æ–Ω—ã –∏ —É–≥–æ–ª –º–µ–∂–¥—É –Ω–∏–º–∏ –æ–¥–Ω–æ–≥–æ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞ —Ä–∞–≤–Ω—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ –¥–≤—É–º —Å—Ç–æ—Ä–æ–Ω–∞–º –∏ —É–≥–ª—É –º–µ–∂–¥—É –Ω–∏–º–∏ –¥—Ä—É–≥–æ–≥–æ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞, —Ç–æ —Ç–∞–∫–∏–µ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∏ —Ä–∞–≤–Ω—ã.',
                    hint: '–î–≤–µ —Å—Ç–æ—Ä–æ–Ω—ã –∏ —É–≥–æ–ª –ú–ï–ñ–î–£ –Ω–∏–º–∏',
                    formula: 'AB = A‚ÇÅB‚ÇÅ, AC = A‚ÇÅC‚ÇÅ, ‚à†A = ‚à†A‚ÇÅ',
                    shortName: '–ü–æ –¥–≤—É–º —Å—Ç–æ—Ä–æ–Ω–∞–º –∏ —É–≥–ª—É –º–µ–∂–¥—É –Ω–∏–º–∏'
                },
                {
                    id: 'tri-011',
                    type: 'theorem',
                    difficulty: 3,
                    question: '–í—Ç–æ—Ä–æ–π –ø—Ä–∏–∑–Ω–∞–∫ —Ä–∞–≤–µ–Ω—Å—Ç–≤–∞ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–æ–≤',
                    answer: '–ï—Å–ª–∏ —Å—Ç–æ—Ä–æ–Ω–∞ –∏ –¥–≤–∞ –ø—Ä–∏–ª–µ–∂–∞—â–∏—Ö –∫ –Ω–µ–π —É–≥–ª–∞ –æ–¥–Ω–æ–≥–æ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞ —Ä–∞–≤–Ω—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ —Å—Ç–æ—Ä–æ–Ω–µ –∏ –¥–≤—É–º –ø—Ä–∏–ª–µ–∂–∞—â–∏–º –∫ –Ω–µ–π —É–≥–ª–∞–º –¥—Ä—É–≥–æ–≥–æ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞, —Ç–æ —Ç–∞–∫–∏–µ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∏ —Ä–∞–≤–Ω—ã.',
                    hint: '–°—Ç–æ—Ä–æ–Ω–∞ –∏ –¥–≤–∞ —É–≥–ª–∞ –ü–†–ò –ù–ï–ô',
                    formula: 'AB = A‚ÇÅB‚ÇÅ, ‚à†A = ‚à†A‚ÇÅ, ‚à†B = ‚à†B‚ÇÅ',
                    shortName: '–ü–æ —Å—Ç–æ—Ä–æ–Ω–µ –∏ –¥–≤—É–º –ø—Ä–∏–ª–µ–∂–∞—â–∏–º —É–≥–ª–∞–º'
                },
                {
                    id: 'tri-012',
                    type: 'theorem',
                    difficulty: 3,
                    question: '–¢—Ä–µ—Ç–∏–π –ø—Ä–∏–∑–Ω–∞–∫ —Ä–∞–≤–µ–Ω—Å—Ç–≤–∞ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–æ–≤',
                    answer: '–ï—Å–ª–∏ —Ç—Ä–∏ —Å—Ç–æ—Ä–æ–Ω—ã –æ–¥–Ω–æ–≥–æ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞ —Ä–∞–≤–Ω—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ —Ç—Ä—ë–º —Å—Ç–æ—Ä–æ–Ω–∞–º –¥—Ä—É–≥–æ–≥–æ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞, —Ç–æ —Ç–∞–∫–∏–µ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∏ —Ä–∞–≤–Ω—ã.',
                    hint: '–¢—Ä–∏ —Å—Ç–æ—Ä–æ–Ω—ã',
                    formula: 'AB = A‚ÇÅB‚ÇÅ, BC = B‚ÇÅC‚ÇÅ, AC = A‚ÇÅC‚ÇÅ',
                    shortName: '–ü–æ —Ç—Ä—ë–º —Å—Ç–æ—Ä–æ–Ω–∞–º'
                },
                {
                    id: 'tri-013',
                    type: 'definition',
                    difficulty: 2,
                    question: '–ß—Ç–æ —Ç–∞–∫–æ–µ –ú–ï–î–ò–ê–ù–ê —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞?',
                    answer: '–ú–µ–¥–∏–∞–Ω–∞ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞ ‚Äî —ç—Ç–æ –æ—Ç—Ä–µ–∑–æ–∫, —Å–æ–µ–¥–∏–Ω—è—é—â–∏–π –≤–µ—Ä—à–∏–Ω—É —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞ —Å —Å–µ—Ä–µ–¥–∏–Ω–æ–π –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω–æ–π —Å—Ç–æ—Ä–æ–Ω—ã.',
                    hint: '–î–æ –°–ï–†–ï–î–ò–ù–´ —Å—Ç–æ—Ä–æ–Ω—ã',
                    properties: [
                        '‚úì –í —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–µ —Ç—Ä–∏ –º–µ–¥–∏–∞–Ω—ã',
                        '‚úì –í—Å–µ –º–µ–¥–∏–∞–Ω—ã –ø–µ—Ä–µ—Å–µ–∫–∞—é—Ç—Å—è –≤ –æ–¥–Ω–æ–π —Ç–æ—á–∫–µ'
                    ]
                },
                {
                    id: 'tri-014',
                    type: 'definition',
                    difficulty: 2,
                    question: '–ß—Ç–æ —Ç–∞–∫–æ–µ –ë–ò–°–°–ï–ö–¢–†–ò–°–ê —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞?',
                    answer: '–ë–∏—Å—Å–µ–∫—Ç—Ä–∏—Å–∞ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞ ‚Äî —ç—Ç–æ –æ—Ç—Ä–µ–∑–æ–∫ –±–∏—Å—Å–µ–∫—Ç—Ä–∏—Å—ã —É–≥–ª–∞ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞, —Å–æ–µ–¥–∏–Ω—è—é—â–∏–π –≤–µ—Ä—à–∏–Ω—É —Å —Ç–æ—á–∫–æ–π –Ω–∞ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω–æ–π —Å—Ç–æ—Ä–æ–Ω–µ.',
                    hint: '–î–µ–ª–∏—Ç –£–ì–û–õ –ø–æ–ø–æ–ª–∞–º',
                    properties: [
                        '‚úì –î–µ–ª–∏—Ç —É–≥–æ–ª –Ω–∞ –¥–≤–∞ —Ä–∞–≤–Ω—ã—Ö —É–≥–ª–∞',
                        '‚úì –í —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–µ —Ç—Ä–∏ –±–∏—Å—Å–µ–∫—Ç—Ä–∏—Å—ã'
                    ]
                },
                {
                    id: 'tri-015',
                    type: 'definition',
                    difficulty: 2,
                    question: '–ß—Ç–æ —Ç–∞–∫–æ–µ –í–´–°–û–¢–ê —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞?',
                    answer: '–í—ã—Å–æ—Ç–∞ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞ ‚Äî —ç—Ç–æ –ø–µ—Ä–ø–µ–Ω–¥–∏–∫—É–ª—è—Ä, –æ–ø—É—â–µ–Ω–Ω—ã–π –∏–∑ –≤–µ—Ä—à–∏–Ω—ã —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞ –Ω–∞ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—É—é —Å—Ç–æ—Ä–æ–Ω—É (–∏–ª–∏ –µ—ë –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ).',
                    hint: '–ü–µ—Ä–ø–µ–Ω–¥–∏–∫—É–ª—è—Ä –∫ —Å—Ç–æ—Ä–æ–Ω–µ',
                    properties: [
                        '‚úì –í —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–µ —Ç—Ä–∏ –≤—ã—Å–æ—Ç—ã',
                        '‚úì –û–±—Ä–∞–∑—É–µ—Ç –ø—Ä—è–º–æ–π —É–≥–æ–ª —Å –æ—Å–Ω–æ–≤–∞–Ω–∏–µ–º'
                    ]
                },
                {
                    id: 'tri-016',
                    type: 'theorem',
                    difficulty: 2,
                    question: '–ù–µ—Ä–∞–≤–µ–Ω—Å—Ç–≤–æ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞',
                    answer: '–õ—é–±–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞ –º–µ–Ω—å—à–µ —Å—É–º–º—ã –¥–≤—É—Ö –¥—Ä—É–≥–∏—Ö —Å—Ç–æ—Ä–æ–Ω.',
                    hint: '–û–¥–Ω–∞ —Å—Ç–æ—Ä–æ–Ω–∞ < —Å—É–º–º–∞ –¥–≤—É—Ö –¥—Ä—É–≥–∏—Ö',
                    formula: 'AB < AC + BC'
                }
            ]
        };
        
        // ========== STORAGE ==========
        const Storage = {
            getProgress: (topicId) => {
                const data = localStorage.getItem(`progress_${topicId}`);
                return data ? JSON.parse(data) : {};
            },
            
            setProgress: (topicId, cardId, level) => {
                const progress = Storage.getProgress(topicId);
                progress[cardId] = {
                    level: level, // 0: forgot, 1: learning, 2: know
                    lastReview: Date.now(),
                    reviewCount: (progress[cardId]?.reviewCount || 0) + 1
                };
                localStorage.setItem(`progress_${topicId}`, JSON.stringify(progress));
            },
            
            getStats: (topicId) => {
                const progress = Storage.getProgress(topicId);
                const total = Object.keys(progress).length;
                const mastered = Object.values(progress).filter(p => p.level === 2).length;
                const learning = Object.values(progress).filter(p => p.level === 1).length;
                return { total, mastered, learning };
            }
        };
        
        // ========== COMPONENTS ==========
        
        function FlashCard({ card, onAnswer, onFlip, isFlipped }) {
            return (
                <div className="flashcard-container">
                    <div 
                        className={`flashcard ${isFlipped ? 'flipped' : ''}`}
                        onClick={onFlip}
                    >
                        {/* Front */}
                        <div className="card-face card-front">
                            <div className={`card-type-badge badge-${card.type}`}>
                                {card.type === 'definition' ? '–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ' : '–¢–µ–æ—Ä–µ–º–∞'}
                            </div>
                            <div className="card-question">{card.question}</div>
                            {card.hint && (
                                <div className="card-hint">üí° {card.hint}</div>
                            )}
                            <div style={{ marginTop: '20px', fontSize: '14px', color: '#64748B' }}>
                                üëÜ –ù–∞–∂–º–∏, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –æ—Ç–≤–µ—Ç
                            </div>
                        </div>
                        
                        {/* Back */}
                        <div className="card-face card-back">
                            <div className="card-answer">{card.answer}</div>
                            
                            {card.formula && (
                                <div className="card-formula">{card.formula}</div>
                            )}
                            
                            {card.properties && (
                                <ul className="card-properties">
                                    {card.properties.map((prop, i) => (
                                        <li key={i}>{prop}</li>
                                    ))}
                                </ul>
                            )}
                            
                            {card.example && (
                                <div style={{ marginTop: '16px', fontSize: '14px', opacity: 0.9 }}>
                                    –ü—Ä–∏–º–µ—Ä: {card.example}
                                </div>
                            )}
                        </div>
                    </div>
                    
                    {isFlipped && (
                        <div className="card-actions">
                            <button className="action-btn btn-forgot" onClick={() => onAnswer(0)}>
                                üòî –ó–∞–±—ã–ª
                            </button>
                            <button className="action-btn btn-learning" onClick={() => onAnswer(1)}>
                                ü§î –£—á—É
                            </button>
                            <button className="action-btn btn-know" onClick={() => onAnswer(2)}>
                                ‚úÖ –ó–Ω–∞—é
                            </button>
                        </div>
                    )}
                </div>
            );
        }
        
        function ProgressBar({ current, total }) {
            const percentage = total > 0 ? (current / total) * 100 : 0;
            
            return (
                <div className="progress-container">
                    <div className="progress-label">
                        <span>–ü—Ä–æ–≥—Ä–µ—Å—Å</span>
                        <span>{current} / {total}</span>
                    </div>
                    <div className="progress-bar">
                        <div className="progress-fill" style={{ width: `${percentage}%` }}></div>
                    </div>
                </div>
            );
        }
        
        function StatsBar({ mastered, learning, total }) {
            return (
                <div className="stats-bar">
                    <div className="stat-card">
                        <div className="stat-value">{mastered}</div>
                        <div className="stat-label">–ó–Ω–∞—é</div>
                    </div>
                    <div className="stat-card">
                        <div className="stat-value">{learning}</div>
                        <div className="stat-label">–£—á—É</div>
                    </div>
                    <div className="stat-card">
                        <div className="stat-value">{total}</div>
                        <div className="stat-label">–í—Å–µ–≥–æ</div>
                    </div>
                </div>
            );
        }
        
        function ModeSelection({ onSelectMode }) {
            return (
                <div className="content">
                    <h2 style={{ fontSize: '24px', fontWeight: '800', marginBottom: '20px' }}>
                        –í—ã–±–µ—Ä–∏ —Ä–µ–∂–∏–º –æ–±—É—á–µ–Ω–∏—è
                    </h2>
                    <div className="mode-selection">
                        <div className="mode-card" onClick={() => onSelectMode('study')}>
                            <div className="mode-icon">üìö</div>
                            <div className="mode-title">–ò–∑—É—á–µ–Ω–∏–µ</div>
                            <div className="mode-description">
                                –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–π –∫–∞—Ä—Ç–æ—á–∫–∏ –≤ —Å–≤–æ—ë–º —Ç–µ–º–ø–µ
                            </div>
                        </div>
                        
                        <div className="mode-card" onClick={() => onSelectMode('practice')}>
                            <div className="mode-icon">üß†</div>
                            <div className="mode-title">–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</div>
                            <div className="mode-description">
                                –ü–æ–≤—Ç–æ—Ä—è–π –∫–∞—Ä—Ç–æ—á–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ —É—á–∏—Ç—å
                            </div>
                        </div>
                        
                        <div className="mode-card" onClick={() => onSelectMode('test')}>
                            <div className="mode-icon">‚ö°</div>
                            <div className="mode-title">–ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç</div>
                            <div className="mode-description">
                                10 —Å–ª—É—á–∞–π–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –Ω–∞ –≤—Ä–µ–º—è
                            </div>
                        </div>
                    </div>
                </div>
            );
        }
        
        function CompletionScreen({ onRestart, stats }) {
            return (
                <div className="completion-screen">
                    <div className="completion-icon">üéâ</div>
                    <div className="completion-title">–û—Ç–ª–∏—á–Ω–æ!</div>
                    <div className="completion-message">
                        –¢—ã –ø—Ä–æ—à—ë–ª –≤—Å–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –≤ —ç—Ç–æ–π —Å–µ—Å—Å–∏–∏!<br/>
                        –ü—Ä–æ–¥–æ–ª–∂–∞–π –≤ —Ç–æ–º –∂–µ –¥—É—Ö–µ! üí™
                    </div>
                    <button className="btn-restart" onClick={onRestart}>
                        –ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ
                    </button>
                </div>
            );
        }
        
        function App() {
            const [mode, setMode] = useState(null);
            const [currentIndex, setCurrentIndex] = useState(0);
            const [isFlipped, setIsFlipped] = useState(false);
            const [sessionCards, setSessionCards] = useState([]);
            const [completed, setCompleted] = useState(false);
            
            const topic = trianglesData;
            const progress = Storage.getProgress(topic.id);
            const stats = Storage.getStats(topic.id);
            
            useEffect(() => {
                // Telegram Web App integration
                if (window.Telegram?.WebApp) {
                    window.Telegram.WebApp.ready();
                    window.Telegram.WebApp.expand();
                }
            }, []);
            
            const startSession = (selectedMode) => {
                setMode(selectedMode);
                
                let cards = [];
                if (selectedMode === 'study') {
                    cards = [...topic.cards];
                } else if (selectedMode === 'practice') {
                    // –ö–∞—Ä—Ç–æ—á–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å
                    cards = topic.cards.filter(card => {
                        const p = progress[card.id];
                        return !p || p.level < 2;
                    });
                } else if (selectedMode === 'test') {
                    // 10 —Å–ª—É—á–∞–π–Ω—ã—Ö –∫–∞—Ä—Ç–æ—á–µ–∫
                    const shuffled = [...topic.cards].sort(() => Math.random() - 0.5);
                    cards = shuffled.slice(0, 10);
                }
                
                setSessionCards(cards);
                setCurrentIndex(0);
                setIsFlipped(false);
                setCompleted(false);
            };
            
            const handleFlip = () => {
                setIsFlipped(!isFlipped);
            };
            
            const handleAnswer = (level) => {
                const card = sessionCards[currentIndex];
                Storage.setProgress(topic.id, card.id, level);
                
                if (currentIndex < sessionCards.length - 1) {
                    setCurrentIndex(currentIndex + 1);
                    setIsFlipped(false);
                } else {
                    setCompleted(true);
                }
            };
            
            const handleRestart = () => {
                setMode(null);
                setCompleted(false);
            };
            
            if (!mode) {
                return (
                    <>
                        <div className="header">
                            <h1>{topic.icon} {topic.title}</h1>
                            <p>{topic.description}</p>
                        </div>
                        <StatsBar 
                            mastered={stats.mastered}
                            learning={stats.learning}
                            total={topic.cards.length}
                        />
                        <ModeSelection onSelectMode={startSession} />
                    </>
                );
            }
            
            if (completed) {
                return (
                    <>
                        <div className="header">
                            <h1>{topic.icon} {topic.title}</h1>
                            <p>–°–µ—Å—Å–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞</p>
                        </div>
                        <CompletionScreen onRestart={handleRestart} stats={stats} />
                    </>
                );
            }
            
            const currentCard = sessionCards[currentIndex];
            
            return (
                <>
                    <div className="header">
                        <h1>{topic.icon} {topic.title}</h1>
                        <p>{mode === 'study' ? '–ò–∑—É—á–µ–Ω–∏–µ' : mode === 'practice' ? '–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞' : '–¢–µ—Å—Ç'}</p>
                    </div>
                    
                    <div className="content">
                        <ProgressBar 
                            current={currentIndex + 1}
                            total={sessionCards.length}
                        />
                        
                        <FlashCard
                            card={currentCard}
                            onAnswer={handleAnswer}
                            onFlip={handleFlip}
                            isFlipped={isFlipped}
                        />
                        
                        <button 
                            className="btn-restart"
                            onClick={handleRestart}
                            style={{ width: '100%', marginTop: '20px' }}
                        >
                            üè† –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –º–µ–Ω—é
                        </button>
                    </div>
                </>
            );
        }
        
        // ========== RENDER ==========
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
